<!DOCTYPE html><html><head> <title>Abc</title> <meta name='viewport' content='width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' /> <meta charset='utf-8' /> <style> .divMain { position: fixed; left: 50%; top: 50%; transform: translate(-50%, -50%); padding: 0.3rem; text-align: center; } input { text-align: center; font-size: 1.1rem; margin: 0.3rem; } .btn { font-size: 1.1rem; text-decoration: none; color: #000; border: 0.1rem solid #000; border-radius: 0.1rem; margin: 0.3rem; padding: 0.2rem; display: inline-block; } .btn:hover { background: lightskyblue; border-radius: 0; } .msg { position: fixed; width: 100vw; left: 0; padding: 0.3rem; background: rgb(0, 91, 134); color: #fff; text-align: center; top: -100%; font-size: 1.1rem; transition: all 0.9s ease-in-out; } .msgShow { top: 0; } </style></head><body> <div id='msg' class='msg'></div> <div class='divMain'> <div> <div> <input id='ssid' type='text' /> </div> <div> <input id='wifiPwd' type='password' /> </div> </div> <div> <div> <input id='user' type='text' /> </div> <div> <input id='userPwd' type='password' /> </div> </div> <div> <div> <input id='websocketDomain' type='text' /> </div> <div> <input id='websocketPort' type='text' /> </div> <div> <input id='websocketPath' type='text' /> </div> </div> <div> <div> <input id='nickname' type='text' /> </div> <div> <input id='token' type='password' /> </div> </div> <div> <div> <a class='btn' id='setArguments'></a> </div> <div> <a class='btn' id='reboot'></a> </div> <div> <a class='btn' id='rebootNow'></a> </div> <div> <a class='btn' id='rollback'></a> </div> <div> <a class='btn' id='deepSleep'></a> </div> </div> </div> <script> (function(){function e(e){for(let t=0;t<e.byteLength;++t)e.arr.push(0);let t=new Uint8Array(e.arr),n=new DataView(t.buffer);switch(e.type){case'8':n.setUint8(t.byteLength-e.byteLength,e.number);break;case'16':n.setUint16(t.byteLength-e.byteLength,e.number,!0);break;case'32':n.setUint32(t.byteLength-e.byteLength,e.number,!0);break;case'64':n.setBigUint64(t.byteLength-e.byteLength,BigInt(e.number),!0);break;case'f':n.setFloat32(t.byteLength-e.byteLength,e.number,!0);break;case'd':n.setFloat64(t.byteLength-e.byteLength,e.number,!0)}return e.arr=Array.from(t),e.arr}function t(t){if(!t)return;if(!t.length)return;let n=Object.prototype.toString,o=[];for(let L=0;L<t.length;L++)if(typeName=n.call(t[L]).toLowerCase().split(' ')[1],0<=typeName.indexOf('number')){let n=t[L],u=n.toString();if(parseInt(u)==parseFloat(u))n>=0?n<256?(o.push(r),o=e({arr:o,byteLength:1,number:n,type:'8'})):n>255&&n<65536?(o.push(a),o=e({arr:o,byteLength:2,number:n,type:'16'})):n>65535&&n<4294967296?(o.push(g),o=e({arr:o,byteLength:4,number:n,type:'32'})):(o.push(h),o=e({arr:o,byteLength:8,number:n,type:'64'})):n>=-128?(o.push(b),o=e({arr:o,byteLength:1,number:n,type:'8'})):n<-128&&n>=-32768?(o.push(f),o=e({arr:o,byteLength:2,number:n,type:'16'})):n<-32768&&n>=-2147483648?(o.push(i),o=e({arr:o,byteLength:4,number:n,type:'32'})):(o.push(y),o=e({arr:o,byteLength:8,number:n,type:'64'}));else{let t=n.toString().length-1;t>5?(o.push(l),o=e({arr:o,byteLength:8,number:n,type:'d'})):(o.push(p),o=e({arr:o,byteLength:4,number:n,type:'f'}))}}else if(0<=typeName.indexOf('bigint'))o.push(h),o=e({arr:o,byteLength:8,number:t[L],type:'64'});else if(0<=typeName.indexOf('uint8array')){o.push(u),o=e({arr:o,byteLength:4,number:t[L].length,type:'32'});for(let e of t[L])o.push(e)}else if(0<=typeName.indexOf('string')){o.push(s);let n=(new TextEncoder).encode(t[L]);o=e({arr:o,byteLength:4,number:n.length+1,type:'32'});for(let e of n)o.push(e);o.push(0)}return new Uint8Array(o).buffer}function n(e,t,n,o,L){if(!e)return;if(!e.byteLength)return;let c,m=[],d=e=>n?{}:[];try{c=new DataView(e)}catch(e){return d()}let U=0;for(;U<e.byteLength;){let t=c.getUint8(U);if(t>247&&(t-=256),m.length&&o)break;switch(t){case r:case b:if(++U,e.byteLength-U<1)return d();if(L?m.push({data:t==r?c.getUint8(U):c.getInt8(U),offset:U,length:1}):m.push(t==r?c.getUint8(U):c.getInt8(U)),++U,o)break;break;case a:case f:if(++U,e.byteLength-U<2)return d();L?m.push({data:t==a?c.getUint16(U,!0):c.getInt16(U,!0),offset:U,length:2}):m.push(t==a?c.getUint16(U,!0):c.getInt16(U,!0)),U+=2;break;case g:case i:if(++U,e.byteLength-U<4)return d();L?m.push({data:t==g?c.getUint32(U,!0):c.getInt32(U,!0),offset:U,length:4}):m.push(t==g?c.getUint32(U,!0):c.getInt32(U,!0)),U+=4;break;case h:case y:if(++U,e.byteLength-U<8)return d();L?m.push({data:t==h?c.getBigUint64(U,!0):c.getBigInt64(U,!0),offset:U,length:8}):m.push(t==h?c.getBigUint64(U,!0):c.getBigInt64(U,!0)),U+=8;break;case p:case l:if(++U,e.byteLength-U<(t==p?4:8))return d();L?m.push({data:m.push(t==p?c.getFloat32(U,!0):c.getFloat64(U,!0)),offset:U,length:t==p?4:8}):m.push(t==p?c.getFloat32(U,!0):c.getFloat64(U,!0)),U+=t==p?4:8;break;case u:if(++U,e.byteLength-U<4)return d();let n=c.getUint32(U,!0);if(U+=4,e.byteLength-U<n)return d();if(L&&n+U>e.byteLength){m.push({offset:U,length:n});break}let w=new Uint8Array(n);for(let e=0;e<n;e++)w[e]=c.getUint8(U++);L?m.push({data:w,offset:U-n-1,length:n}):m.push(w);break;case s:if(++U,e.byteLength-U<4)return d();let k=c.getUint32(U,!0)-1;if(U+=4,e.byteLength-U<k)return d();let B=new Uint8Array(k);for(let e=0;e<k;e++)B[e]=c.getUint8(U++);B=(new TextDecoder).decode(B),++U,L?m.push({data:B,offset:U-k-1,length:k}):m.push(B)}}if(!n)return m;if(!n.length)return m;let w={};for(let e=0;e<n.length;e++)e>m.length-1?w[n[e]]=null:w[n[e]]=m[e];return w}const r=1,a=2,g=4,h=8,u=10,s=9,b=-1,f=-2,i=-4,y=-8,p=6,l=7;'object'==typeof window?(window.createArrayBuffer=t,window.decodeArrayBuffer=n):module.exports={createArrayBuffer:t,decodeArrayBuffer:n}})(); </script> <script> (function(){let e,r,t,l=(e,r)=>r>>>e|r<<32-e,o=(e,r,t)=>e&r^~e&t,n=(e,r,t)=>e&r^e&t^r&t,f=e=>l(2,e)^l(13,e)^l(22,e),a=e=>l(6,e)^l(11,e)^l(25,e),w=e=>l(7,e)^l(18,e)^e>>>3,A=e=>l(17,e)^l(19,e)^e>>>10,y=(e,r)=>e[15&r]+=A(e[r+14&15])+e[r+9&15]+w(e[r+1&15]),c=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),d='0123456789abcdef',u=(e,r)=>{let t=(65535&e)+(65535&r),l=(e>>16)+(r>>16)+(t>>16);return l<<16|65535&t},h=()=>{e=new Array(8);r=new Array(2);t=new Array(64);r[0]=r[1]=0;e[0]=1779033703;e[1]=3144134277;e[2]=1013904242;e[3]=2773480762;e[4]=1359893119;e[5]=2600822924;e[6]=528734635;e[7]=1541459225},i=()=>{let r,l,w,A,d,h,i,g,s,b,p=new Array(16);r=e[0];l=e[1];w=e[2];A=e[3];d=e[4];h=e[5];i=e[6];g=e[7];for(let e=0;e<16;e++)p[e]=t[3+(e<<2)]|t[2+(e<<2)]<<8|t[1+(e<<2)]<<16|t[e<<2]<<24;for(let e=0;e<64;e++){s=g+a(d)+o(d,h,i)+c[e];s+=e<16?p[e]:y(p,e);b=f(r)+n(r,l,w);g=i;i=h;h=d;d=u(A,s);A=w;w=l;l=r;r=u(s,b)}e[0]+=r;e[1]+=l;e[2]+=w;e[3]+=A;e[4]+=d;e[5]+=h;e[6]+=i;e[7]+=g},g=(e,l)=>{let o,n,f=0;n=r[0]>>3&63;let a=63&l;(r[0]+=l<<3)<l<<3&&r[1]++;r[1]+=l>>29;for(o=0;o+63<l;o+=64){for(let r=n;r<64;r++)t[r]=e.charCodeAt(f++);i();n=0}for(let r=0;r<a;r++)t[r]=e.charCodeAt(f++)},s=()=>{let e=r[0]>>3&63;t[e++]=128;if(e<=56)for(let r=e;r<56;r++)t[r]=0;else{for(let r=e;r<64;r++)t[r]=0;i();for(let e=0;e<56;e++)t[e]=0}t[56]=r[1]>>>24&255;t[57]=r[1]>>>16&255;t[58]=r[1]>>>8&255;t[59]=255&r[1];t[60]=r[0]>>>24&255;t[61]=r[0]>>>16&255;t[62]=r[0]>>>8&255;t[63]=255&r[0];i()},b=()=>{let r=0,t=new Array(32);for(let l=0;l<8;l++){t[r++]=e[l]>>>24&255;t[r++]=e[l]>>>16&255;t[r++]=e[l]>>>8&255;t[r++]=255&e[l]}return t},p=()=>{let r=new String;for(let t=0;t<8;t++)for(let l=28;l>=0;l-=4)r+=d.charAt(e[t]>>>l&15);return r},C=(e,r,t)=>{h();g(e,e.length);s();return r?b():p()};'object'==typeof window?window.getHash=C:module.exports=C})(); </script> <script> (e=>{let t=window,o=e=>document.getElementById(e),n=t.showMsg=((e,t)=>{t=t||3e3;let n=o('msg');try{clearTimeout(n.t)}catch(e){}n.innerHTML=e,n.className+=' msgShow',n.t=setTimeout(()=>{n.className='msg'},t)}),c=!0,r={cn:{ssid:'WiFi名称',wifiPwd:'WiFi密码',user:'用户名',userPwd:'密码',websocketDomain:'WebSocket主机',websocketPort:'WebSocket端口',websocketPath:'WebSocket路径',nickname:'昵称',token:'令牌',setArguments:'设置参数',reboot:'重启',rebootNow:'立即重启',rollback:'回滚固件',deepSleep:'睡眠10分钟',txtError:'错误',txtSet:'设置参数成功',txtDelayReboot:'设备将会在3秒后重启',txtRollback:'回滚操作成功',txtDeepSleep:'设备即将睡眠',txtConnected:'已连接',txtDisconnected:'已断开',txtInvalid:'不合法'},en:{ssid:'WiFi SSID',wifiPwd:'WiFi password',user:'User name',userPwd:'password',websocketDomain:'WebSocket host',websocketPort:'WebSocket port',websocketPath:'WebSocket path',nickname:'Nickname',token:'Token',setArguments:'Submit',reboot:'Reboot',rebootNow:'Reboot immediately',rollback:'Rollback firmware',deepSleep:'Deep sleep 10 minutes',txtError:'Error',txtSet:'Arguments set',txtDelayReboot:'Will reboot in 3 seconds',txtRollback:'Rollback OK',txtDeepSleep:'Will into deep sleep in 3 seconds',txtConnected:'Connected',txtDisconnected:'Disconnected',txtInvalid:' Invalid'}};(e=>{let t=navigator.language;t.length&&(t=t.substring(0,2).toLowerCase(),t.startsWith('en')&&(c=!1));let o=document.getElementsByTagName('a');for(let e of o)e.href&&''!=e.href||(e.href='javascript:void(0);'),e.innerText=c?r.cn[e.id]:r.en[e.id];o=document.getElementsByTagName('input');for(let e of o)'text'!=e.type&&'password'!=e.type||(e.placeholder=c?r.cn[e.id]:r.en[e.id])})();let l=t.connectWebsocket=(e=>{try{t.webSocket=new WebSocket('ws://'+t.location.host+':80'),t.webSocket.binaryType='arraybuffer',t.webSocket.onerror=(e=>{n((c?r.cn.txtError:r.en.txtError)+': '+JSON.stringify(e)),setTimeout(()=>{l()},1e3)}),t.webSocket.onmessage=(e=>{if(e.data&&e.data.byteLength>=2){let t=decodeArrayBuffer(e.data);t&&t.length&&(0==t[0]?n(c?r.cn.txtSet:r.en.txtSet):1==t[0]?n(c?r.cn.txtDelayReboot:r.en.txtDelayReboot):136==t[0]?n(c?r.cn.txtRollback:r.en.rollback):137==t[0]?n(c?r.cn.txtDeepSleep:r.en.deepSleep):t[0])}}),t.webSocket.onopen=function(){n(c?r.cn.txtConnected:r.en.txtConnected)},t.webSocket.onclose=(e=>{n(c?r.cn.txtDisconnected:r.en.txtDisconnected),setTimeout(()=>{l()},1e3)})}catch(e){setTimeout(()=>{l()},1e3)}});t.connectWebsocket();let i=t.launch=function(e){t.webSocket.send(createArrayBuffer(e))};o('setArguments').onclick=(e=>{let t=e=>{n(e+(c?r.cn.txtInvalid:r.en.txtInvalid))},l=o('nickname').value,a=o('ssid').value;if(!a.trim().length)return void t(c?r.cn.ssid:r.en.ssid);let s=o('wifiPwd').value;if(!s.trim().length)return void t(c?r.cn.wifiPwd:r.en.wifiPwd);let d=o('user').value;if(!d.trim().length)return void t(c?r.cn.user:r.en.user);let b=o('userPwd').value;if(!b.trim().length)return void t(c?r.cn.userPwd:r.en.userPwd);let u=o('websocketDomain').value;if(!u.trim().length)return void t(c?r.cn.websocketDomain:r.en.websocketDomain);let k=o('websocketPort').value;k=k.replace(/\s/g,''),k=k.length?k:'80',k=parseInt(k);let w=o('websocketPath').value;w=w.replace(/\s/g,''),w=w.length?w:'/';let m=o('token').value;i([0,l,a,s,new Uint8Array(getHash(d,!0)),new Uint8Array(getHash(b,!0)),u,k,w,m])}),o('reboot').onclick=(e=>{i([1])}),o('rebootNow').onclick=(e=>{i([2])}),o('rollback').onclick=(e=>{i([136])}),o('deepSleep').onclick=(e=>{i([137])}),(e=>{let t=document.getElementsByTagName('input');for(let e of t)'text'!=e.type&&'password'!=e.type||(e.onkeyup=function(e){localStorage[this.id]=this.value});for(let e in localStorage){let t=o(e);t&&(t.value=localStorage[e])}})()})(); </script></body></html>