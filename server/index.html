<!DOCTYPE html><html><head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" /> <title>Internal Of Things</title> <style> body { background-image: radial-gradient(circle at 30% 30%, #1574a8, #666); } .divLogin { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; padding: 1rem; z-index: 3; } .divLoginHide { display: none; } .LoginInput { font-size: 1.1rem; margin: 0.2rem; padding: 0.2rem; text-align: center; color: #fff; border: 0.1rem solid #fff; border-radius: 0.3rem; background-color: rgba(35, 13, 96, 0.3); } .smallButton { display: inline-block; text-decoration: none; font-size: 1.3rem; margin: 0.1rem; color: #fff; cursor: pointer; } .button { display: inline-block; text-decoration: none; font-size: 1.3rem; cursor: pointer; margin: 0.1rem; color: #fff; border: 0.1rem solid #fff; border-radius: 0.3rem; padding: 0.2rem; } .btnLogin { margin-top: 0.3rem; } .remPwdDot { margin: 0 auto; width: 0.8rem; left: 50%; height: 0.8rem; border: .18rem solid #fff; border-radius: 50%; display: block; background-color: transparent; } .remPwdDotSelected { background-color: #fff; } .divRemPwd { margin: 0.8rem; text-align: center; cursor: pointer; } .spanText { font-size: 1.3rem; color: #fff; cursor: pointer; } .divMsg { position: absolute; left: 0; top: -5vh; width: 100vw; height: 5vh; text-align: center; color: #fff; font-size: 1.3rem; transition: ease-in-out 0.8s; } .divMsgShow { top: 0; } .devices { margin-top: 1rem; position: absolute; left: 50%; transform: translateX(-50%); height: 90vh; text-align: center; width: 90vw; z-index: 0; } .deviceMore { position: fixed; height: 80vh; width: 80vw; left: 50%; top: 50%; transform: translate(-50%, -50%); border: 0.1rem solid #fff; border-radius: 0.5rem; background: rgba(35, 13, 96, 0.3); display: none; text-align: center; justify-items: center; backdrop-filter: blur(0.3rem); overflow-y: auto; } .deviceMoreShow { display: block; } .device { padding: 0.5rem; border: 0.2rem solid #fff; font-size: 1.3rem; color: #fff; text-align: center; margin: 0.8rem; border-radius: 0.8rem; display: inline-block; } </style></head><body> <div id="divMsg"></div> <div id="divLogin" class="divLogin"> <div> <div> <input id='userName' class="LoginInput" type='text' placeholder="用户名" /> </div> <div> <input id='password' class="LoginInput" type='password' placeholder="密码" /> </div> </div> <div id="btnContainer"> <a id='login' class="button btnLogin">登录</a> </div> <div id="btnRemPwd" class="divRemPwd"> <div id="remPwdDot" class="remPwdDot"></div> <span class="spanText">记住密码</span> </div> </div> <div id="devices" class="devices"> </div> <script>(function(){let e,r,t,l=(e,r)=>r>>>e|r<<32-e,o=(e,r,t)=>e&r^~e&t,f=(e,r,t)=>e&r^e&t^r&t,n=e=>l(2,e)^l(13,e)^l(22,e),a=e=>l(6,e)^l(11,e)^l(25,e),w=e=>l(7,e)^l(18,e)^e>>>3,A=e=>l(17,e)^l(19,e)^e>>>10,y=(e,r)=>e[15&r]+=A(e[r+14&15])+e[r+9&15]+w(e[r+1&15]),i=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),c="0123456789abcdef",d=(e,r)=>{let t=(65535&e)+(65535&r),l=(e>>16)+(r>>16)+(t>>16);return l<<16|65535&t},h=()=>{e=new Array(8),r=new Array(2),t=new Array(64),r[0]=r[1]=0,e[0]=1779033703,e[1]=3144134277,e[2]=1013904242,e[3]=2773480762,e[4]=1359893119,e[5]=2600822924,e[6]=528734635,e[7]=1541459225},s=()=>{let r,l,w,A,c,h,s,u,g,p,b=new Array(16);r=e[0],l=e[1],w=e[2],A=e[3],c=e[4],h=e[5],s=e[6],u=e[7];for(let e=0;e<16;e++)b[e]=t[3+(e<<2)]|t[2+(e<<2)]<<8|t[1+(e<<2)]<<16|t[e<<2]<<24;for(let e=0;e<64;e++)g=u+a(c)+o(c,h,s)+i[e],g+=e<16?b[e]:y(b,e),p=n(r)+f(r,l,w),u=s,s=h,h=c,c=d(A,g),A=w,w=l,l=r,r=d(g,p);e[0]+=r,e[1]+=l,e[2]+=w,e[3]+=A,e[4]+=c,e[5]+=h,e[6]+=s,e[7]+=u},u=(e,l)=>{let o,f,n=0;f=r[0]>>3&63;let a=63&l;if((r[0]+=l<<3)<l<<3&&r[1]++,r[1]+=l>>29,"string"==typeof e){for(o=0;o+63<l;o+=64){for(let r=f;r<64;r++)t[r]=e.charCodeAt(n++);s(),f=0}for(let r=0;r<a;r++)t[r]=e.charCodeAt(n++)}else{for(o=0;o+63<l;o+=64){for(let r=f;r<64;r++)t[r]=e[n++];s(),f=0}for(let r=0;r<a;r++)t[r]=e[n++]}},g=()=>{let e=r[0]>>3&63;if(t[e++]=128,e<=56)for(let r=e;r<56;r++)t[r]=0;else{for(let r=e;r<64;r++)t[r]=0;s();for(let e=0;e<56;e++)t[e]=0}t[56]=r[1]>>>24&255,t[57]=r[1]>>>16&255,t[58]=r[1]>>>8&255,t[59]=255&r[1],t[60]=r[0]>>>24&255,t[61]=r[0]>>>16&255,t[62]=r[0]>>>8&255,t[63]=255&r[0],s()},p=()=>{let r=0,t=new Array(32);for(let l=0;l<8;l++)t[r++]=e[l]>>>24&255,t[r++]=e[l]>>>16&255,t[r++]=e[l]>>>8&255,t[r++]=255&e[l];return t},b=()=>{let r=new String;for(let t=0;t<8;t++)for(let l=28;l>=0;l-=4)r+=c.charAt(e[t]>>>l&15);return r},C=(e,r,t)=>(h(),u(e,e.length),g(),r?p():b());"object"==typeof window?window.getHash=C:module.exports=C})();</script> <script>!function(e,t){"object"==typeof exports?module.exports=exports=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}(this,function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),i={},n=i.lib={},o=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=n.WordArray=o.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var c=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=c<<24-(i+o)%4*8}else for(o=0;o<n;o+=4)t[i+o>>>2]=r[o>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,i=[],n=function(t){t=t;var r=987654321,i=4294967295;return function(){r=36969*(65535&r)+(r>>16)&i,t=18e3*(65535&t)+(t>>16)&i;var n=(r<<16)+t&i;return n/=4294967296,n+=.5,n*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=n(4294967296*(r||e.random()));r=987654071*s(),i.push(4294967296*s()|0)}return new c.init(i,t)}}),s=i.enc={},a=s.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(r,t/2)}},f=s.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(r,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,n=r.sigBytes,o=this.blockSize,s=4*o,a=n/s;a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);var f=a*o,u=e.min(4*f,n);if(f){for(var p=0;p<f;p+=o)this._doProcessBlock(i,p);var h=i.splice(0,f);r.sigBytes-=u}return new c.init(h,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(n.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math);return e}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core.min")):"function"==typeof define&&define.amd?define(["./core.min"],t):t(e.CryptoJS)}(this,function(e){return function(){function t(e,t,r){for(var i=[],o=0,c=0;c<t;c++)if(c%4){var s=r[e.charCodeAt(c-1)]<<c%4*2,a=r[e.charCodeAt(c)]>>>6-c%4*2;i[o>>>2]|=(s|a)<<24-o%4*8,o++}return n.create(i,o)}var r=e,i=r.lib,n=i.WordArray,o=r.enc;o.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],o=0;o<r;o+=3)for(var c=t[o>>>2]>>>24-o%4*8&255,s=t[o+1>>>2]>>>24-(o+1)%4*8&255,a=t[o+2>>>2]>>>24-(o+2)%4*8&255,f=c<<16|s<<8|a,u=0;u<4&&o+.75*u<r;u++)n.push(i.charAt(f>>>6*(3-u)&63));var p=i.charAt(64);if(p)for(;n.length%4;)n.push(p);return n.join("")},parse:function(e){var r=e.length,i=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var o=0;o<i.length;o++)n[i.charCodeAt(o)]=o}var c=i.charAt(64);if(c){var s=e.indexOf(c);-1!==s&&(r=s)}return t(e,r,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),e.enc.Base64}),function(e,t,r){"object"==typeof exports?module.exports=exports=t(require("./core.min"),require("./evpkdf.min")):"function"==typeof define&&define.amd?define(["./core.min","./evpkdf.min"],t):t(e.CryptoJS)}(this,function(e){var t,r,i,n,o,c,s,a,f,u,p,h,d,l,y,v,_,m,g,x,k,B,S;e.lib.Cipher||(r=e,i=r.lib,n=i.Base,o=i.WordArray,c=i.BufferedBlockAlgorithm,s=r.enc,s.Utf8,a=s.Base64,f=r.algo,u=f.EvpKDF,p=i.Cipher=c.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?S:x}return function(t){return{encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()}),i.StreamCipher=p.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),h=r.mode={},d=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),l=h.CBC=function(){function e(e,r,i){var n=this._iv;if(n){var o=n;this._iv=t}else o=this._prevBlock;for(var c=0;c<i;c++)e[r+c]^=o[c]}var r=d.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var i=this._cipher,n=i.blockSize;e.call(this,t,r,n),i.encryptBlock(t,r),this._prevBlock=t.slice(r,r+n)}}),r.Decryptor=r.extend({processBlock:function(t,r){var i=this._cipher,n=i.blockSize,o=t.slice(r,r+n);i.decryptBlock(t,r),e.call(this,t,r,n),this._prevBlock=o}}),r}(),y=r.pad={},v=y.Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,c=[],s=0;s<i;s+=4)c.push(n);var a=o.create(c,i);e.concat(a)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},i.BlockCipher=p.extend({cfg:p.cfg.extend({mode:l,padding:v}),reset:function(){p.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=r.createEncryptor;else{i=r.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==i?this._mode.init(this,t&&t.words):(this._mode=i.call(r,this,t&&t.words),this._mode.__creator=i)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{t=this._process(!0);e.unpad(t)}return t},blockSize:4}),_=i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),m=r.format={},g=m.OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var i=o.create([1398893684,1701076831]).concat(r).concat(t);else i=t;return i.toString(a)},parse:function(e){var t=a.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var i=o.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return _.create({ciphertext:t,salt:i})}},x=i.SerializableCipher=n.extend({cfg:n.extend({format:g}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),o=n.finalize(t),c=n.cfg;return _.create({ciphertext:o,key:r,iv:c.iv,algorithm:e,mode:c.mode,padding:c.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=e.createDecryptor(r,i).finalize(t.ciphertext);return n},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),k=r.kdf={},B=k.OpenSSL={execute:function(e,t,r,i){i||(i=o.random(8));var n=u.create({keySize:t+r}).compute(e,i),c=o.create(n.words.slice(t),4*r);return n.sigBytes=4*t,_.create({key:n,iv:c,salt:i})}},S=i.PasswordBasedCipher=x.extend({cfg:x.cfg.extend({kdf:B}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=i.kdf.execute(r,e.keySize,e.ivSize);i.iv=n.iv;var o=x.encrypt.call(this,e,t,n.key,i);return o.mixIn(n),o},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt);i.iv=n.iv;var o=x.decrypt.call(this,e,t,n.key,i);return o}}))}),function(e,t,r){"object"==typeof exports?module.exports=exports=t(require("./core.min"),require("./cipher-core.min")):"function"==typeof define&&define.amd?define(["./core.min","./cipher-core.min"],t):t(e.CryptoJS)}(this,function(e){return e.pad.Pkcs7}),function(e,t,r){"object"==typeof exports?module.exports=exports=t(require("./core.min"),require("./enc-base64.min"),require("./md5.min"),require("./evpkdf.min"),require("./cipher-core.min")):"function"==typeof define&&define.amd?define(["./core.min","./enc-base64.min","./md5.min","./evpkdf.min","./cipher-core.min"],t):t(e.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,i=r.BlockCipher,n=t.algo,o=[],c=[],s=[],a=[],f=[],u=[],p=[],h=[],d=[],l=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var n=i^i<<1^i<<2^i<<3^i<<4;n=n>>>8^255&n^99,o[r]=n,c[n]=r;var y=e[r],v=e[y],_=e[v],m=257*e[n]^16843008*n;s[r]=m<<24|m>>>8,a[r]=m<<16|m>>>16,f[r]=m<<8|m>>>24,u[r]=m;m=16843009*_^65537*v^257*y^16843008*r;p[n]=m<<24|m>>>8,h[n]=m<<16|m>>>16,d[n]=m<<8|m>>>24,l[n]=m,r?(r=y^e[e[e[_^y]]],i^=e[e[i]]):r=i=1}}();var y=[0,1,2,4,8,16,32,64,128,27,54],v=n.AES=i.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=this._nRounds=r+6,n=4*(i+1),c=this._keySchedule=[],s=0;s<n;s++)if(s<r)c[s]=t[s];else{var a=c[s-1];s%r?r>6&&s%r==4&&(a=o[a>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a]):(a=a<<8|a>>>24,a=o[a>>>24]<<24|o[a>>>16&255]<<16|o[a>>>8&255]<<8|o[255&a],a^=y[s/r|0]<<24),c[s]=c[s-r]^a}for(var f=this._invKeySchedule=[],u=0;u<n;u++){s=n-u;if(u%4)a=c[s];else a=c[s-4];f[u]=u<4||s<=4?a:p[o[a>>>24]]^h[o[a>>>16&255]]^d[o[a>>>8&255]]^l[o[255&a]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,f,u,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,p,h,d,l,c);r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,o,c,s){for(var a=this._nRounds,f=e[t]^r[0],u=e[t+1]^r[1],p=e[t+2]^r[2],h=e[t+3]^r[3],d=4,l=1;l<a;l++){var y=i[f>>>24]^n[u>>>16&255]^o[p>>>8&255]^c[255&h]^r[d++],v=i[u>>>24]^n[p>>>16&255]^o[h>>>8&255]^c[255&f]^r[d++],_=i[p>>>24]^n[h>>>16&255]^o[f>>>8&255]^c[255&u]^r[d++],m=i[h>>>24]^n[f>>>16&255]^o[u>>>8&255]^c[255&p]^r[d++];f=y,u=v,p=_,h=m}y=(s[f>>>24]<<24|s[u>>>16&255]<<16|s[p>>>8&255]<<8|s[255&h])^r[d++],v=(s[u>>>24]<<24|s[p>>>16&255]<<16|s[h>>>8&255]<<8|s[255&f])^r[d++],_=(s[p>>>24]<<24|s[h>>>16&255]<<16|s[f>>>8&255]<<8|s[255&u])^r[d++],m=(s[h>>>24]<<24|s[f>>>16&255]<<16|s[u>>>8&255]<<8|s[255&p])^r[d++];e[t]=y,e[t+1]=v,e[t+2]=_,e[t+3]=m},keySize:8});t.AES=i._createHelper(v)}(),e.AES}),function(e,t){"object"==typeof exports?module.exports=exports=t(require("./core.min")):"function"==typeof define&&define.amd?define(["./core.min"],t):t(e.CryptoJS)}(this,function(e){return e.enc.Utf8});</script> <script>(function(){function e(e){if(!e)return;if(!e.length)return;let t=Object.prototype.toString,n=[];for(let r=0;r<e.length;r++)if(typeName=t.call(e[r]).toLowerCase().split(" ")[1],0<=typeName.indexOf("number")){if(e[r]<256)n.push(128),n.push(e[r]);else if(e[r]>255&&e[r]<65536){n.push(129);let t=new DataView(new Uint16Array([e[r]]).buffer);n.push(t.getUint8(1)),n.push(t.getUint8(0))}else if(e[r]>65535&&e[r]<4294967296){n.push(130);let t=new DataView(new Uint32Array([e[r]]).buffer);for(let e=3;e>-1;e--)n.push(t.getUint8(e))}else if(e[r]>=4294967296){n.push(131);let t=e[r],i=new DataView(new Uint32Array([4294967295&t]).buffer);t=parseInt(t/4294967295);let f=new DataView(new Uint32Array([4294967295&t]).buffer),u=[];for(let e=0;e<4;e++)u.push(i.getUint8(e));for(let e=0;e<4;e++)u.push(f.getUint8(e));u.reverse();for(let e of u)n.push(e)}}else if(0<=typeName.indexOf("bigint")){let t=e[r];n.push(131);let i=BigInt(255),f=BigInt(8),u=[];for(let e=0;e<8;++e)u.push(Number(t&i)),t>>=f;u.reverse();for(let e of u)n.push(e)}else if(0<=typeName.indexOf("object")){n.push(132);let t=(new TextEncoder).encode(JSON.stringify(e[r])),i=new DataView(new Uint32Array([t.length]).buffer);for(let e=3;e>-1;e--)n.push(i.getUint8(e));for(let e of t)n.push(e)}else if(0<=typeName.indexOf("uint8array")){n.push(133);let t=new DataView(new Uint32Array([e[r].length]).buffer);for(let e=3;e>-1;e--)n.push(t.getUint8(e));for(let t of e[r])n.push(t)}else if(0<=typeName.indexOf("string")){n.push(134);let t=(new TextEncoder).encode(e[r]),i=new DataView(new Uint32Array([t.length]).buffer);for(let e=3;e>-1;e--)n.push(i.getUint8(e));for(let e of t)n.push(e)}else{n.push(135);let t=(new TextEncoder).encode(JSON.stringify(e[r])),i=new DataView(new Uint32Array([t.length]).buffer);for(let e=3;e>-1;e--)n.push(i.getUint8(e));for(let e of t)n.push(e)}return new Uint8Array(n).buffer}function t(e,t,n,r,i){if(!e)return;if(!e.byteLength)return;let f,u=[],l=e=>n?{}:[];try{f=new DataView(e)}catch(e){return l()}for(let n=0;n<e.byteLength;)if(128^f.getUint8(n))if(129^f.getUint8(n))if(130^f.getUint8(n))if(131^f.getUint8(n))if(132^f.getUint8(n))if(133^f.getUint8(n))if(134^f.getUint8(n)){if(135^f.getUint8(n))return u;{if(n++,e.byteLength-n<4)return l();let t=f.getUint32(n);if(n+=4,e.byteLength-n<t)return l();let r=new Uint8Array(t);for(let e=0;e<t;e++)r[e]=f.getUint8(n++);r=(new TextDecoder).decode(r);try{r=JSON.parse(r),u.push(r)}catch(e){u.push(r)}}}else{if(n++,e.byteLength-n<4)return l();let t=f.getUint32(n);if(n+=4,e.byteLength-n<t)return l();let r=new Uint8Array(t);for(let e=0;e<t;e++)r[e]=f.getUint8(n++);r=(new TextDecoder).decode(r),u.push(r)}else{if(n++,e.byteLength-n<4)return l();let t=f.getUint32(n);if(n+=4,e.byteLength-n<t)return l();if(i&&t+n>e.byteLength){u.push({offset:n,length:t});break}let r=new Uint8Array(t);for(let e=0;e<t;e++)r[e]=f.getUint8(n++);i?u.push({data:r,offset:n-t-1,length:t}):u.push(r)}else{if(n++,e.byteLength-n<4)return l();let t=f.getUint32(n);if(n+=4,e.byteLength-n<t)return l();let r={offset:n},h=new Uint8Array(t);for(let e=0;e<t;e++)h[e]=f.getUint8(n++);h=(new TextDecoder).decode(h);try{h=JSON.parse(h),i?(r.data=h,r.length=t,u.push(r)):u.push(h)}catch(e){u.push(h)}}else{if(n++,e.byteLength-n<8)return l();let r=BigInt(0),h=new Uint32Array(2);for(let e=0;e<4;e++)h[0]=h[0]+f.getUint8(n+e),e<3&&(h[0]<<=8);for(let e=4;e<8;e++)h[1]=h[1]+f.getUint8(n+e),e<7&&(h[1]<<=8);r+=BigInt(h[0]),r<<=BigInt(32),r+=BigInt(h[1]),t&&(r=Number(r)),i?u.push({data:r,offset:n,length:8}):u.push(r),n+=8}else{if(n++,e.byteLength-n<4)return l();i?u.push({data:u.push(f.getUint32(n)),offset:n,length:4}):u.push(f.getUint32(n)),n+=4}else{if(n++,e.byteLength-n<2)return l();i?u.push({data:f.getUint16(n),offset:n,length:2}):u.push(f.getUint16(n)),n+=2}else{if(n++,e.byteLength-n<1)return l();if(i?(u.push({data:f.getUint8(n),offset:n,length:1}),n++):u.push(f.getUint8(n++)),r)break}if(!n)return u;if(!n.length)return u;let h={};for(let e=0;e<n.length;e++)e>u.length-1?h[n[e]]=null:h[n[e]]=u[e];return h}"object"==typeof window?(window.createArrayBuffer=e,window.decodeArrayBuffer=t):module.exports={createArrayBuffer:e,decodeArrayBuffer:t}})();</script> <script>(function(){let e=window,t=(e,t,i,n,s)=>{let r=create("a");return r.className=s||"button",r.innerText=e,r.onclick=t,r.ondblclick=i,n&&(r.id=n),r};class i{constructor(e,t,i,n,s,r){this.boardID=e,this.providerID=t,null!==r&&(this.customID=r,this.hasCustomID=!0),this.name=i,this.mask=n,this.isAdmin=s,this.arguments=[],this.showToUser=!1,this.buildContainer()}buildContainer(){let e=create(),i=null,n=getHash(this.boardID+this.providerID+this.name);e.id=n+"_container";let s=this.mask,r=7&s;this.lengthOfAArguments=r;let a=128&s,o=64&s,h=32&s,l=8&s;this.encrypt=!!l,a||o||h?this.isAdmin?a?i=t(this.name,e=>{this.execute()}):o&&(i=t(this.name,0,e=>{this.execute()})):e.style.display="none":(e.style.display="inline-block",i=t(this.name,e=>{this.execute()}),this.showToUser=!0);for(let t=0;t<r;++t){let i=create("input");i.type="text",i.className="LoginInput",i.placeholder=t.toString(),this.arguments.push(i),e.appendChild(i)}i&&(e.appendChild(i),i.title="Provider ID: "+this.providerID+(this.hasCustomID?", Custom ID: "+this.customID:""),i.id=n),r||(e.style.display="inline-block"),this.container=e}execute(){let t=(new Date).getTime(),i=getHash(e.userName+e.password+t.toString(),!0);i=new Uint8Array(i);let n=[];for(let e of this.arguments)n.push(e.value);let s=BigInt("0xC0000000000000BB"),r=[s,this.boardID,e.id,t,i,this.providerID];if(n.length){let t=new Uint8Array(createArrayBuffer(n));this.encrypt&&(t=t.toHex(),t=encrypt(t,e.password,e.password.substring(0,32),!0)),r.push(t)}sendArrayBuffer(r)}}class n{constructor(e){this.buildManagementPanel(),this.updateInfo(e),this.id=this.info.id;let t=create();t.className="device",this.nicknameContainer=this.createNicknameContainer(),t.appendChild(this.nicknameContainer),this.createMoreContainer(),this.buildOTAPanel(),this.buildProviderPanel(),document.body.appendChild(this.moreContainer),t.appendChild(this.providerPanel),this.container=t}isAdmin(){return 32&this.info.extra}createMoreContainer(){let e=create();e.className="deviceMore",e.onclick=(e=>{if(e.path&&e.path.length){let t=e.path[0].tagName||e.path[0].nodeName;"div"==t.toLowerCase()&&(this.moreContainer.className="deviceMore")}}),e.appendChild(t("id: "+this.info.id)),e.appendChild(t("版本: "+this.info.firmwareVersion)),e.appendChild(t("App版本: "+this.info.appVersion)),this.moreContainer=e}createNicknameContainer(){let e=create(),i=create("span");return i.innerText=this.info.nickname,e.appendChild(i),this.isAdmin()&&(this.btnMore=t("@",e=>{this.moreContainer.className+=" deviceMoreShow"},null,null,"smallButton"),e.appendChild(this.btnMore)),e}buildManagementPanel(){let e=create();this.managePanel=e}getNetworkFormat(){let e=this.info.extra;return 192==e?"Wifi已连接,AP已开启":128==e?"Wifi已连接,AP已关闭":64==e?"Wifi未连接,AP已开启":void 0}buildProviderPanel(){let e=create(),t=decodeArrayBuffer(this.info.providers.buffer);this.providerPanel=e;let n=create();for(let s=0;s<t.length;s++){let r=decodeArrayBuffer(t[s].buffer,!0,["id","mask","name","customID"]);if(!r)continue;let a=new i(this.id,r.id,r.name,r.mask,this.isAdmin(),void 0!==r.customID?r.customID:null);a.container&&(a.showToUser?e.appendChild(a.container):a.lengthOfAArguments?this.moreContainer.appendChild(a.container):n.appendChild(a.container))}this.moreContainer.appendChild(n)}updateInfo(e){this.info={cpu:e[2],extra:e[3],time:e[4],heap:e[5],nickname:e[6],id:e[7],firmwareVersion:e[8],appVersion:e[9],providers:e[10]}}buildOTAPanel(){let e=create();this.firmware=null;let i=t("加载固件",e=>{let t=create("input");t.type="file";let i=new FileReader;t.onchange=(e=>{let n=t.files[0];i.readAsArrayBuffer(n),i.onload=(e=>{this.firmware=i.result,this.showMsg("固件已加载, 大小: "+this.firmware.byteLength+"字节",1e5)})}),t.click()}),n=t("更新固件",e=>{this.ota(!0)});e.appendChild(i),e.appendChild(n),this.moreContainer.appendChild(e)}ota(){if(!this.firmware)return void showMsg("尚未加载固件");showMsg("正在上传固件");let t=(new Date).getTime(),i=getHash(e.userName+e.password+t.toString(),!0);i=new Uint8Array(i);let n=new Uint8Array(this.firmware),s=new Uint8Array(getHash(n,!0));sendArrayBuffer([171,this.id,e.id,n,t,i,parseInt(8192),s])}otaProgress(e){this.showMsg("升级固件: "+e+"%")}commandResponse(e){showMsg(e)}showMsg(e,t){"b"==getType(e)&&(e=Number(e)),"number"==getType(e)&&(e=e.toString()),this.tShowMsg&&clearTimeout(this.tShowMsg),this.nicknameContainer.children[0].innerText=e,this.tShowMsg=setTimeout(()=>{this.nicknameContainer.children[0].innerText=this.info.nickname},t||1e4)}}e.Device=n})();</script> <script>(function(){let e=window;e.rememberPassword=!1;let t=Uint8Array;e.devices=[];let r=e.get=(e=>document.getElementById(e)),n=e.create=((e,t)=>{e=e||"div";let r=document.createElement(e);return t&&(r.style.display="inline-block"),r});e.getType=function(e,t){let r=Object.prototype.toString.call(e).toLowerCase().split(" ")[1];return r=r.substring(0,r.length-1),"array"==r?"a":"uint8array"==r?"u8a":"string"==r?r:"number"==r?t?e<0?r:e>=0&&e<255?"u8":e>=255&&e<65535?"u16":e>=65535&&e<4294967295?"u32":"u64":r:"bigint"==r?"b":"object"==r?t?e.constructor.name?e.constructor.name:"uo":"o":"arraybuffer"==r?"ab":"function"==r?"f":"date"==r?"d":"dataview"==r?"dv":r},t.prototype.toHex=function(){let e="";for(let t of this){let r;t?(r=t.toString(16),1==r.length&&(r="0"+r)):r="00",e+=r}return e},String.prototype.toU8a=function(){if(this.length%2)return;let e=this,r=new t(e.length/2),n=0;for(let t=0;t<e.length;t+=2)r[n++]=parseInt(e.substring(t,t+2),16);return r};let s=e.decrypt=((e,t,r,n)=>{if(!e)return"";t=CryptoJS.enc.Hex.parse(t),r=CryptoJS.enc.Hex.parse(r),e=CryptoJS.enc.Hex.parse(e),e=CryptoJS.enc.Base64.stringify(e);let s=CryptoJS.AES.decrypt(e,t,{iv:r,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),o=s.toString(CryptoJS.enc.Hex);return n?o.toU8a():o});e.encrypt=((e,t,r,n)=>{if(!e)return"";t=CryptoJS.enc.Hex.parse(t),r=CryptoJS.enc.Hex.parse(r);let s=CryptoJS.enc.Hex.parse(e),o=CryptoJS.AES.encrypt(s,t,{iv:r,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}),a=o.ciphertext.toString();return n?a.toU8a():a}),(t=>{let r=localStorage,n=JSON;class s{constructor(e){if(this.key=e,this.arr=0,this.exists=!1,r[e]&&r[e].length)try{this.arr=n.parse(r[e]),this.exists=!0}catch(e){this.arr=[]}else this.arr=[]}update(){r[this.key]=n.stringify(this.arr)}find(e){return this.arr.find(e)}size(){return this.arr.length}filter(e){return this.arr.filter(e)}findIndex(e){return this.arr.findIndex(e)}push(e,t){this.arr.push(e),t||this.update()}splice(e,t,r){this.arr.splice(e,t||1),r||this.update()}spliceIfExists(e,t){let r=this.findIndex(e);r>=0&&this.splice(r,t)}pushIfNotExists(e,t,r){this.set(e,t,r)}get(e,t){let r=this,n=r.findIndex(e);if(n>=0)return t?{index:n,data:r.arr[n]}:r.arr[n]}set(e,t,r){let n=this,s=n.findIndex(e);s>=0?n.arr[s]=t:n.arr.push(t),r||n.update()}concat(e,t){let r=this;r.arr=e instanceof s?r.arr.concat(e.arr):r.arr.concat(e),t||r.update}forEach(e){for(let t of this.arr)e(t)}}e.LSAsArray=s})();let o=new LSAsArray("users");e.setEventEmitter=(e=>{e.on=((t,r,n,s,o)=>{if(e["@"+t]||(e["@"+t]=[]),!n)return void e["@"+t].push({id:n,fn:r,obj:s,disposable:o});let a=e["@"+t].find(e=>e.id==n);a||e["@"+t].push({id:n,fn:r,obj:s,disposable:o})}),e.emit=((t,r)=>{let n=e["@"+t];if(!n)return;for(let e=0;e<n.length;e++)n[e].obj?n[e].run=!n[e].fn.apply(n[e].obj,[r]):n[e].run=!n[e].fn(r);let s=n.length;for(let e=0;e<s;e++)n[e]&&n[e].run&&n[e].disposable&&(n.splice(e,1),e--)})});let a=e.showMsg=((e,t)=>{let n=r("divMsg");if(n.t)try{clearTimeout(n.t)}catch(e){}n.className="divMsg divMsgShow",n.innerHTML=e,n.t=setTimeout(()=>{n.className="divMsg"},t||3e3)});(t=>{setEventEmitter(e),e.on("connected",t=>{e.connected=!0,a("已建立连接")}),e.on("unknownData",e=>{a("接收到了未知消息")}),e.on("disconnected",t=>{e.connected=!1,a("已断开连接")}),e.on("connectionError",t=>{e.connected=!1,a("连接发生错误")}),e.on("unknownCommand",function(e){a("接收到了未知命令"+e.toString())}),e.on("newDevice",function(t){let n=e.devices.find(e=>e.id==t[7]);n?n.updateInfo(t):(n=new Device(t),e.devices.push(n),r("devices").appendChild(n.container))});let n=r("btnRemPwd"),s=r("remPwdDot");n.onclick=(t=>{e.rememberPassword?(e.rememberPassword=!1,s.className+="remPwdDot",e.readPwdFromCache&&a("是否清除保存的密码?<a class='smallButton' onclick='removeUserInfo()'>是</a>",1e4)):(e.rememberPassword=!0,s.className+=" remPwdDotSelected")})})(),e.removeUserInfo=(e=>{delete localStorage.users,a("密码已清除"),r("remPwdDot").className="remPwdDot"}),e.generateHash=(t=>{let r=(new Date).getTime().toString();return{t:r,hash:getHash(e.userName+e.password+r)}});let i=t=>e.devices.find(e=>e.id==t),c=t=>{t=t.data,"ab"!=getType(t)&&e.emit("unknownData");let r=decodeArrayBuffer(t);if(r&&r.length){let t=r[0],n=getType(t,!0);if("b"===n){let e=BigInt(255);t&=e,t=Number(t)}else if("u8"!=n)return;switch(t){case 12:sendArrayBuffer([192]);break;case 250:e.emit("newDevice",r);break;case 174:{let e=i(r[1]);e&&e.otaProgress(r[2]);break}case 182:{let e=i(r[2]);e&&e.commandResponse(r[3]);break}case 251:{r[1]="u8a"==getType(r[1])?r[1].toHex():r[1];let t=i(r[1]);if(t)if(5==r.length){let n=s(r[3].toHex(),e.password,e.password.substring(0,32),!0);n&&n.length&&t.showMsg(decodeArrayBuffer(n.buffer))}else t.showMsg("u8a"==getType(r[3])?decodeArrayBuffer(r[3].buffer):r[3]);break}default:e.emit("unknownCommand",t)}}};e.resetWebsocket=function(){e.webSocket=new WebSocket("ws://"+e.location.host),webSocket.binaryType="arraybuffer",webSocket.onopen=function(){e.emit("connected")},webSocket.onclose=function(){e.emit("disconnected"),setTimeout(()=>{e.resetWebsocket()},1e3)},webSocket.onmessage=function(e){c(e)},webSocket.onerror=function(t){e.emit("connectionError")}},e.resetWebsocket(),e.sendArrayBuffer=(e=>{webSocket.send(createArrayBuffer(e))});let d=(t,n,s)=>{e.password=n=s?n:getHash(n),r("divLogin").className+=" divLoginHide",r("devices").className+=" devicesShow",e.rememberPassword&&t.length&&n.length&&(o.set(e=>e.userName==t,{userName:t,password:n}),a("密码已存储")),e.userName=t=getHash(t),e.id=getHash(t+n+"admin");let i=(new Date).getTime(),c=new Uint8Array(getHash(t+n+i.toString(),!0)),d=BigInt("0xC0000000000000AF");sendArrayBuffer([d,e.id,e.userName,i,c])};o.size()&&(1==o.size()?e.on("connected",t=>{e.readPwdFromCache=!0,e.rememberPassword=!0,r("remPwdDot").className+=" remPwdDotSelected",setTimeout(()=>{let t=o.get(e=>!0);e.rememberPassword&&d(t.userName,t.password,!0)},1e3)}):o.forEach(t=>{let s=n("a");s.className="button",s.innerText=t.userName,s.onclick=function(){e.readPwdFromCache=!0,d(t.userName,t.password,!0)},r("btnContainer").appendChild(s)})),r("login").onclick=function(){d(r("userName").value,r("password").value,0)},(e=>{let t=document.getElementsByTagName("a");for(let e of t)e.className.indexOf("button")>=0&&!e.href&&(e.href="javascript:void(0);")})()})();</script></body></html>