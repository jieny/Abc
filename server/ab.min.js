(function(){function e(e,t){e.push(t)}function t(e,t){let n=new DataView(new Uint16Array([t]).buffer);e.push(n.getUint8(1)),e.push(n.getUint8(0))}function n(e,t){let n=new DataView(new Uint32Array([t]).buffer);for(let t=3;t>-1;t--)e.push(n.getUint8(t))}function r(e,t){let n=new DataView(new Uint32Array([4294967295&t]).buffer);t=parseInt(t/4294967295);let r=new DataView(new Uint32Array([4294967295&t]).buffer),f=[];for(let e=0;e<4;e++)f.push(n.getUint8(e));for(let e=0;e<4;e++)f.push(r.getUint8(e));f.reverse();for(let t of f)e.push(t)}function f(e,t,n,r,f){return r?e.push({data:f?t.getUint8(n):t.getInt8(n),offset:n,length:1}):e.push(f?t.getUint8(n):t.getInt8(n)),1}function i(e,t,n,r,f){return r?e.push({data:f?t.getUint16(n):t.getInt16(n),offset:n,length:2}):e.push(f?t.getUint16(n):t.getInt16(n)),2}function u(e,t,n,r,f){return r?e.push({data:f?t.getUint32(n):t.getInt32(n),offset:n,length:4}):e.push(f?t.getUint32(n):t.getInt32(n)),4}function a(e,t,n,r,f){let i=BigInt(0),u=new Uint32Array(2);for(let e=0;e<4;e++)u[0]=u[0]+t.getUint8(n+e),e<3&&(u[0]<<=8);for(let e=4;e<8;e++)u[1]=u[1]+t.getUint8(n+e),e<7&&(u[1]<<=8);return i+=BigInt(u[0]),i<<=BigInt(32),i+=BigInt(u[1]),f&&(i=Number(i)),r?e.push({data:i,offset:n,length:8}):e.push(i),8}function s(f){if(!f)return;if(!f.length)return;let i=Object.prototype.toString,u=[];for(let a=0;a<f.length;a++)if(typeName=i.call(f[a]).toLowerCase().split(" ")[1],0<=typeName.indexOf("number")){let i=f[a],s=i.toString();if(parseInt(s)==parseFloat(s))i>=0?i<256?(u.push(l),e(u,i)):i>255&&i<65536?(u.push(o),t(u,i)):i>65535&&i<4294967296?(u.push(g),n(u,i)):(u.push(p),r(u,i)):i>=-128?(u.push(b),e(u,i)):i<-128&&i>=-32768?(u.push(U),t(u,i)):i<-32768&&i>=-2147483648?(u.push(d),n(u,i)):(u.push(A),r(u,i));else{let e=i.toString().length-1;e>5?(u.push(L),r(u,i)):(u.push(I),n(u,i))}}else if(0<=typeName.indexOf("bigint")){let e=f[a];u.push(p);let t=BigInt(255),n=BigInt(8),r=[];for(let f=0;f<8;++f)r.push(Number(e&t)),e>>=n;r.reverse();for(let e of r)u.push(e)}else if(0<=typeName.indexOf("object")){u.push(w);let e=(new TextEncoder).encode(JSON.stringify(f[a])),t=new DataView(new Uint32Array([e.length]).buffer);for(let e=3;e>-1;e--)u.push(t.getUint8(e));for(let t of e)u.push(t)}else if(0<=typeName.indexOf("uint8array")){u.push(c);let e=new DataView(new Uint32Array([f[a].length]).buffer);for(let t=3;t>-1;t--)u.push(e.getUint8(t));for(let e of f[a])u.push(e)}else if(0<=typeName.indexOf("string")){u.push(w);let e=(new TextEncoder).encode(f[a]),t=new DataView(new Uint32Array([e.length]).buffer);for(let e=3;e>-1;e--)u.push(t.getUint8(e));for(let t of e)u.push(t)}else{u.push(y);let e=(new TextEncoder).encode(JSON.stringify(f[a])),t=new DataView(new Uint32Array([e.length]).buffer);for(let e=3;e>-1;e--)u.push(t.getUint8(e));for(let t of e)u.push(t)}return new Uint8Array(u).buffer}function h(e,t,n,r,s){if(!e)return;if(!e.byteLength)return;let h,y=[],m=e=>n?{}:[];try{h=new DataView(e)}catch(e){return m()}let x=0;for(;x<e.byteLength;){let n=h.getUint8(x);if(y.length&&r)break;switch(n){case l:case b:if(++x,e.byteLength-x<1)return m();if(x+=f(y,h,x,s,n==l),r)break;break;case o:case U:if(++x,e.byteLength-x<2)return m();x+=i(y,h,x,s,n==o);break;case g:case d:if(++x,e.byteLength-x<4)return m();x+=u(y,h,x,s,n==g);break;case p:case A:if(++x,e.byteLength-x<8)return m();x+=a(y,h,x,s,t);break;case I:case L:if(++x,e.byteLength-x<(n==I?4:8))return m();s?y.push({data:y.push(n==I?h.getFloat32(x):h.getFloat64(x)),offset:x,length:n==I?4:8}):y.push(n==I?h.getFloat32(x):h.getFloat64(x)),x+=n==I?4:8;break;case c:if(++x,e.byteLength-x<4)return m();let B=h.getUint32(x);if(x+=4,e.byteLength-x<B)return m();if(s&&B+x>e.byteLength){y.push({offset:x,length:B});break}let D=new Uint8Array(B);for(let e=0;e<B;e++)D[e]=h.getUint8(x++);s?y.push({data:D,offset:x-B-1,length:B}):y.push(D);break;case w:if(++x,e.byteLength-x<4)return m();let N=h.getUint32(x);if(x+=4,e.byteLength-x<N)return m();let k=new Uint8Array(N);for(let e=0;e<N;e++)k[e]=h.getUint8(x++);k=(new TextDecoder).decode(k),s?y.push({data:k,offset:x-N-1,length:N}):y.push(k)}}if(!n)return y;if(!n.length)return y;let B={};for(let e=0;e<n.length;e++)e>y.length-1?B[n[e]]=null:B[n[e]]=y[e];return B}const l=128,o=129,g=130,p=131,c=133,w=134,y=135,b=136,U=137,d=144,A=145,I=146,L=147;"object"==typeof window?(window.createArrayBuffer=s,window.decodeArrayBuffer=h):module.exports={createArrayBuffer:s,decodeArrayBuffer:h}})();